#include <stdio.h>

int n, k, x;
int balls[105];

int simulate(int row[], int len) {
    int changed;
    do {
        changed = 0;
        int i = 0;
        while (i < len) {
            int j = i;
            while (j < len && row[j] == row[i]) j++;
            if (j - i >= 3) {
                for (int p = i; p < len - (j - i); p++)
                    row[p] = row[p + (j - i)];
                len -= (j - i);
                changed = 1;
                break;
            } else {
                i = j;
            }
        }
    } while (changed);
    return len;
}

int main() {
    scanf("%d %d %d", &n, &k, &x);
    for (int i = 0; i < n; i++) scanf("%d", &balls[i]);

    int maxDestroyed = 0;

    for (int pos = 0; pos <= n; pos++) {
        int row[105];
        int len = 0;

        for (int i = 0; i < pos; i++) row[len++] = balls[i];
        row[len++] = x;
        for (int i = pos; i < n; i++) row[len++] = balls[i];

        int remaining = simulate(row, len);
        int destroyed = len - remaining;
        if (destroyed > maxDestroyed) maxDestroyed = destroyed;
    }

    printf("%d\n", maxDestroyed);
    return 0;
}

