#include <stdio.h>
#include <stdlib.h>

#define MOD 1000000000

int main() {
    int n, m;
    scanf("%d %d", &n, &m);

    long long *arr = (long long*)malloc((n+1) * sizeof(long long));
    long long *fib = (long long*)malloc((n+1) * sizeof(long long));

    for(int i = 1; i <= n; i++) {
        scanf("%lld", arr + i);
    }

    fib[0] = fib[1] = 1;
    for(int i = 2; i <= n; i++) {
        fib[i] = (fib[i-1] + fib[i-2]) % MOD;
    }

    while(m--) {
        int op;
        scanf("%d", &op);

        if(op == 1) {
            int idx;
            long long val;
            scanf("%d %lld", &idx, &val);
            arr[idx] = val;
        } 
        else if(op == 2) {
            int l, r;
            scanf("%d %d", &l, &r);
            long long total = 0;
            for(int i = 0; i <= r - l; i++) {
                total = (total + arr[l + i] * fib[i]) % MOD;
            }
            printf("%lld\n", total);
        } 
        else if(op == 3) {
            int l, r;
            long long add;
            scanf("%d %d %lld", &l, &r, &add);
            for(int i = l; i <= r; i++) {
                arr[i] = (arr[i] + add) % MOD;
            }
        }
    }

    free(arr);
    free(fib);
    return 0;
}

