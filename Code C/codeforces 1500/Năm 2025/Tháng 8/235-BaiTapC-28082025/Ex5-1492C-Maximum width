#include <stdio.h>
#include <string.h>

char s[200005], t[200005];

int main() {
    int n, m;
    scanf("%d %d", &n, &m);
    scanf("%s", s);
    scanf("%s", t);

    int left[200005], right[200005];
    int i, j;

    j = 0;
    for (i = 0; i < n && j < m; i++) {
        if (s[i] == t[j]) left[j++] = i;
    }

    j = m - 1;
    for (i = n - 1; i >= 0 && j >= 0; i--) {
        if (s[i] == t[j]) right[j--] = i;
    }

    int maxWidth = 0;
    for (i = 0; i < m - 1; i++) {
        int width = right[i + 1] - left[i];
        if (width > maxWidth) maxWidth = width;
    }

    printf("%d\n", maxWidth);
    return 0;
}

