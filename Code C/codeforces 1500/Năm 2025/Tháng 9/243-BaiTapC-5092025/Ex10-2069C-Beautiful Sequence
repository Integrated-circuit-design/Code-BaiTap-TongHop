#include <stdio.h>

#define MOD 998244353

int main() {
    int t;
    scanf("%d", &t);
    
    while(t--) {
        int n;
        scanf("%d", &n);
        int a[n];
        for(int i = 0; i < n; i++) scanf("%d", &a[i]);
        
        long long dp[n][4];
        for(int i=0;i<n;i++) for(int j=1;j<=3;j++) dp[i][j]=0;
        
        long long result = 0;
        
        for(int i=0;i<n;i++){
            if(a[i]==1){
                dp[i][1] = 1;
            }
            else if(a[i]==2){
                long long sum1 = 0;
                for(int k=0;k<i;k++) sum1 = (sum1 + dp[k][1]) % MOD;
                dp[i][2] = sum1;
            }
            else if(a[i]==3){
                long long sum2 = 0;
                for(int k=0;k<i;k++) sum2 = (sum2 + dp[k][2]) % MOD;
                dp[i][3] = sum2;
            }
            result = (result + dp[i][3]) % MOD;
        }
        
        printf("%lld\n", result);
    }
    return 0;
}

