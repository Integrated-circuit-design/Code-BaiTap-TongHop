#include <stdio.h>

#define MAXN 1005

int n;
int edges[MAXN][2];
int edge_count;

int query(int a, int b) {
    printf("? %d %d\n", a, b);
    fflush(stdout);
    int x;
    scanf("%d", &x);
    return x;
}

void add_edge(int a, int b) {
    edges[edge_count][0] = a;
    edges[edge_count][1] = b;
    edge_count++;
}

void solve_case() {
    edge_count = 0;

    int known[MAXN];
    int k_count = 1;
    known[0] = 1;

    for (int i = 2; i <= n; i++) {
        int parent = -1;

        for (int j = 0; j < k_count; j++) {
            int x = query(known[j], i);
            if (x == i) {
                parent = known[j];
                break;
            }
        }

        if (parent == -1) parent = 1;

        add_edge(parent, i);
        known[k_count++] = i;
    }

    printf("!");
    for (int i = 0; i < edge_count; i++) {
        printf(" %d %d", edges[i][0], edges[i][1]);
    }
    printf("\n");
    fflush(stdout);
}

int main() {
    int t;
    scanf("%d", &t);
    while (t--) {
        scanf("%d", &n);
        solve_case();
    }
    return 0;
}

