#include <stdio.h>
#define MOD 1000000007LL

long long power2(long long base, int exp) {
    long long ans = 1;
    for (; exp > 0; exp >>= 1) {
        if (exp & 1) ans = ans * base % MOD;
        base = base * base % MOD;
    }
    return ans;
}

int main() {
    int T;
    scanf("%d", &T);
    while (T--) {
        int n, m;
        scanf("%d %d", &n, &m);
        long long or_all = 0;
        while (m--) {
            int l, r;
            long long x;
            scanf("%d %d %lld", &l, &r, &x);
            or_all |= x;
        }
        long long res = or_all % MOD * power2(2, n - 1) % MOD;
        printf("%lld\n", res);
    }
    return 0;
}

