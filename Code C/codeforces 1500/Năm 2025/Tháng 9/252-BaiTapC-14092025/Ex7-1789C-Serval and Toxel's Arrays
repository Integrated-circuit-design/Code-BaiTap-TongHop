#include <stdio.h>

#define LIMIT 400005

static long long cnt[LIMIT];

int main(void) {
    int T;
    scanf("%d", &T);

    while (T--) {
        int n, m;
        scanf("%d %d", &n, &m);

        int total = n + m;

        for (int i = 1; i <= total; i++) cnt[i] = 0;

        for (int i = 1; i <= n; i++) {
            int x;
            scanf("%d", &x);
            cnt[x]++;
        }

        for (int i = 0; i < m; i++) {
            int pos, val;
            scanf("%d %d", &pos, &val);
            cnt[val]++;
        }

        long long pairs = 1LL * (m + 1) * m / 2;
        long long baseSum = pairs * (2LL * n);

        long long inter = 0;
        for (int v = 1; v <= total; v++) {
            if (cnt[v] >= 2) {
                long long f = cnt[v];
                inter += f * (f - 1) / 2;
            }
        }

        printf("%lld\n", baseSum - inter);
    }
    return 0;
}

