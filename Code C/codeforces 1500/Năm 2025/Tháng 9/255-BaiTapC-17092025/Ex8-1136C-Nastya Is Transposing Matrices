#include <stdio.h>
#include <stdlib.h>

#define MAX 505
int A[MAX][MAX], B[MAX][MAX];

int cmp(const void *x, const void *y) {
    long long a = *(long long*)x;
    long long b = *(long long*)y;
    if (a < b) return -1;
    if (a > b) return 1;
    return 0;
}

int main() {
    int n, m;
    scanf("%d %d", &n, &m);

    for (int i = 0; i < n; i++)
        for (int j = 0; j < m; j++)
            scanf("%d", &A[i][j]);

    for (int i = 0; i < n; i++)
        for (int j = 0; j < m; j++)
            scanf("%d", &B[i][j]);

    for (int d = 0; d < n + m - 1; d++) {
        long long arrA[MAX], arrB[MAX];
        int sz = 0;

        for (int i = 0; i < n; i++) {
            int j = d - i;
            if (j >= 0 && j < m)
                arrA[sz++] = A[i][j];
        }

        int sz2 = 0;
        for (int i = 0; i < n; i++) {
            int j = d - i;
            if (j >= 0 && j < m)
                arrB[sz2++] = B[i][j];
        }

        if (sz != sz2) {
            printf("NO\n");
            return 0;
        }

        qsort(arrA, sz, sizeof(long long), cmp);
        qsort(arrB, sz, sizeof(long long), cmp);

        for (int k = 0; k < sz; k++) {
            if (arrA[k] != arrB[k]) {
                printf("NO\n");
                return 0;
            }
        }
    }

    printf("YES\n");
    return 0;
}

