#include <stdio.h>
#include <string.h>

#define MAXN 50
#define MAXM 50
#define INF 1000

int main() {
    int n, m;
    scanf("%d %d", &n, &m);

    char s[MAXN][MAXM+1];
    for (int i = 0; i < n; i++)
        scanf("%s", s[i]);

    int digitPos[MAXN], lowerPos[MAXN], specialPos[MAXN];

    for (int i = 0; i < n; i++) {
        digitPos[i] = lowerPos[i] = specialPos[i] = INF;

        for (int j = 0; j < m; j++) {
            int move = j < m - j ? j : m - j;
            char c = s[i][j];

            if (c >= '0' && c <= '9') {
                if (move < digitPos[i]) digitPos[i] = move;
            } else if (c >= 'a' && c <= 'z') {
                if (move < lowerPos[i]) lowerPos[i] = move;
            } else if (c == '#' || c == '*' || c == '&') {
                if (move < specialPos[i]) specialPos[i] = move;
            }
        }
    }

    int result = INF;

    for (int d = 0; d < n; d++) {
        for (int l = 0; l < n; l++) {
            if (l == d) continue;
            for (int sp = 0; sp < n; sp++) {
                if (sp == d || sp == l) continue;
                int total = digitPos[d] + lowerPos[l] + specialPos[sp];
                if (total < result) result = total;
            }
        }
    }

    printf("%d\n", result);
    return 0;
}

