#include <stdio.h>

int max(int a, int b) {
    return a > b ? a : b;
}

int main() {
    int t;
    scanf("%d", &t);

    while (t--) {
        int n, k, z;
        scanf("%d %d %d", &n, &k, &z);
        int a[n];
        for (int i = 0; i < n; i++)
            scanf("%d", &a[i]);

        int result = 0;

        for (int leftMoves = 0; leftMoves <= z; leftMoves++) {
            int stepsRight = k - 2 * leftMoves;
            if (stepsRight < 0) continue;

            int sum = 0;
            int maxPair = 0;

            for (int i = 0; i <= stepsRight; i++) {
                sum += a[i];
                if (i > 0) {
                    maxPair = max(maxPair, a[i] + a[i-1]);
                }
            }

            sum += leftMoves * maxPair;

            result = max(result, sum);
        }

        printf("%d\n", result);
    }

    return 0;
}

