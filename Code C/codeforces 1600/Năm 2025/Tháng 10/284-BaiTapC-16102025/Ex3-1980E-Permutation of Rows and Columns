#include <stdio.h>
#include <stdlib.h>

#define MAX 200005

int a[MAX], b[MAX];
int pa[MAX], pb[MAX];

int cmp(const void *x, const void *y) {
    int u = *(int*)x, v = *(int*)y;
    return u - v;
}

int main() {
    int t;
    scanf("%d", &t);
    while (t--) {
        int n, m;
        scanf("%d %d", &n, &m);
        for (int i = 0; i < n * m; i++)
            scanf("%d", &a[i]);
        for (int i = 0; i < n * m; i++)
            scanf("%d", &b[i]);
        for (int i = 0; i < n * m; i++) {
            pa[i] = a[i] % m;
            pb[i] = b[i] % m;
        }
        qsort(pa, n * m, sizeof(int), cmp);
        qsort(pb, n * m, sizeof(int), cmp);
        int ok = 1;
        for (int i = 0; i < n * m; i++) {
            if (pa[i] != pb[i]) {
                ok = 0;
                break;
            }
        }
        printf(ok ? "YES\n" : "NO\n");
    }
    return 0;
}

