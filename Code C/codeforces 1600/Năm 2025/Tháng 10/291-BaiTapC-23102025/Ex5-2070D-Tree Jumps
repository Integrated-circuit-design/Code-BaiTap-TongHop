#include <stdio.h>
#include <stdlib.h>

#define MOD 998244353
#define MAXN 300005

int depth[MAXN];

int main() {
    int t;
    scanf("%d", &t);

    while (t--) {
        int n;
        scanf("%d", &n);

        for (int i = 1; i <= n; i++) depth[i] = 0;

        for (int i = 2; i <= n; i++) {
            int parent;
            scanf("%d", &parent);
            depth[i] = depth[parent] + 1;
        }

        int maxDepth = 0;
        for (int i = 1; i <= n; i++) {
            if (depth[i] > maxDepth) maxDepth = depth[i];
        }

        int *level_nodes = (int*)calloc(maxDepth + 1, sizeof(int));
        for (int i = 1; i <= n; i++) {
            level_nodes[depth[i]]++;
        }

        long long ans = 1;
        for (int d = 1; d <= maxDepth; d++) {
            ans = ans * (1LL + level_nodes[d]) % MOD;
        }

        printf("%lld\n", ans);

        free(level_nodes);
    }

    return 0;
}

