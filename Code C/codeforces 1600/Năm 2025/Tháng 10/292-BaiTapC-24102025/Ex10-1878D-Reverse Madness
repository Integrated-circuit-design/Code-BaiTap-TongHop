#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAXN 200005

char s[MAXN];
int l[MAXN], r[MAXN];
int mark[MAXN];

int main() {
    int t;
    scanf("%d", &t);
    while (t--) {
        int n, k;
        scanf("%d %d", &n, &k);
        scanf("%s", s + 1);

        for (int i = 1; i <= k; i++) scanf("%d", &l[i]);
        for (int i = 1; i <= k; i++) scanf("%d", &r[i]);

        int q;
        scanf("%d", &q);

        for (int i = 1; i <= n + 2; i++) mark[i] = 0;

        while (q--) {
            int x;
            scanf("%d", &x);

            int id = 1;
            while (!(l[id] <= x && x <= r[id])) id++;

            int y = l[id] + r[id] - x;
            int a = (x < y) ? x : y;
            int b = (x > y) ? x : y;

            mark[a] ^= 1;
            mark[(l[id] + r[id]) / 2 + 1] ^= 1;
        }

        int flip = 0;
        for (int i = 1; i <= n; i++) {
            flip ^= mark[i];
            if (flip) {
                int seg_id = 1;
                while (!(l[seg_id] <= i && i <= r[seg_id])) seg_id++;
                int j = l[seg_id] + r[seg_id] - i;
                if (i < j) {
                    char tmp = s[i];
                    s[i] = s[j];
                    s[j] = tmp;
                }
            }
        }

        for (int i = 1; i <= n; i++) putchar(s[i]);
        putchar('\n');
    }
    return 0;
}

