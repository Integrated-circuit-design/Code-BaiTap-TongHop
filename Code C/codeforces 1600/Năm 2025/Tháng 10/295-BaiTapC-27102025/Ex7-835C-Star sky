#include <stdio.h>

#define MAX 105
#define MAXC 11

int stars[MAXC][MAX][MAX];

void build_prefix(int c) {
    for (int s = 0; s <= c; s++) {
        for (int i = 1; i < MAX; i++) {
            for (int j = 1; j < MAX; j++) {
                stars[s][i][j] += stars[s][i - 1][j] + stars[s][i][j - 1] - stars[s][i - 1][j - 1];
            }
        }
    }
}

int query(int s, int x1, int y1, int x2, int y2) {
    return stars[s][x2][y2]
         - stars[s][x1 - 1][y2]
         - stars[s][x2][y1 - 1]
         + stars[s][x1 - 1][y1 - 1];
}

int main() {
    int n, q, c;
    scanf("%d %d %d", &n, &q, &c);

    for (int i = 0; i < n; i++) {
        int x, y, s;
        scanf("%d %d %d", &x, &y, &s);
        stars[s][x][y]++;
    }

    build_prefix(c);

    for (int i = 0; i < q; i++) {
        int t, x1, y1, x2, y2;
        scanf("%d %d %d %d %d", &t, &x1, &y1, &x2, &y2);

        long long total = 0;
        for (int s = 0; s <= c; s++) {
            int now = (s + t) % (c + 1);
            int count = query(s, x1, y1, x2, y2);
            total += (long long)now * count;
        }

        printf("%lld\n", total);
    }

    return 0;
}

