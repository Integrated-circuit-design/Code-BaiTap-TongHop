#include <stdio.h>

int a[2005];

int main() {
    int t;
    scanf("%d", &t);

    while (t--) {
        int n;
        scanf("%d", &n);

        for (int i = 0; i < n; i++)
            scanf("%d", &a[i]);

        int maxLen = 1;

        for (int x = 1; x <= 26; x++) {
            int positions[2005];
            int cnt = 0;
            for (int i = 0; i < n; i++)
                if (a[i] == x) positions[cnt++] = i;

            for (int L = 1; 2*L <= cnt; L++) {
                int left = positions[L-1];
                int right = positions[cnt-L];

                int bestMid = 0;
                for (int b = 1; b <= 26; b++) {
                    int countB = 0;
                    for (int i = left + 1; i < right; i++)
                        if (a[i] == b) countB++;
                    if (countB > bestMid) bestMid = countB;
                }

                int total = 2*L + bestMid;
                if (total > maxLen) maxLen = total;
            }
        }

        printf("%d\n", maxLen);
    }

    return 0;
}

